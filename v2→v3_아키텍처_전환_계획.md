# 🔄 Theme Search v2→v3 아키텍처 전환 계획

## 🎯 전체 비전

### v2: Theme Search Admin (관리자 사이트)
**역할**: API 제공 + 컨텐츠 관리 + 시스템 관리
**사용자**: 관리자, 컨텐츠 제작자
**포트**: 3001 (현재)

### v3: Theme Clips (사용자 사이트) 
**역할**: 사용자 경험 + 학습 도구 + 커뮤니티
**사용자**: 영어 학습자, 일반 사용자
**포트**: 3000 (신규)

## 🏗️ v2 Admin 개선 방향

### 1. Admin Dashboard 구축
```typescript
// src/app/admin/
├── dashboard/          # 메인 대시보드
│   ├── overview/       # 전체 현황
│   ├── analytics/      # 통계 및 분석
│   └── system-status/  # 시스템 상태
├── clips/              # 클립 관리
│   ├── list/           # 클립 목록
│   ├── batch-create/   # 배치 생성
│   ├── categories/     # 카테고리 관리
│   └── tags/           # 태그 관리
├── users/              # 사용자 관리 (v3용)
├── content/            # 컨텐츠 관리
│   ├── themes/         # 테마 관리
│   ├── collections/    # 컬렉션 관리
│   └── featured/       # 추천 컨텐츠
└── system/             # 시스템 관리
    ├── database/       # DB 관리
    ├── media/          # 미디어 파일 관리
    └── api-keys/       # API 키 관리
```

### 2. API Gateway 구축
```typescript
// src/app/api/v2/
├── admin/              # 관리자 전용 API
│   ├── clips/          # 클립 CRUD
│   ├── batch/          # 배치 처리
│   ├── analytics/      # 통계 API
│   └── system/         # 시스템 API
├── public/             # 공개 API (v3에서 사용)
│   ├── search/         # 검색 API
│   ├── clips/          # 클립 조회 API
│   ├── categories/     # 카테고리 API
│   └── auth/           # 인증 API
└── internal/           # 내부 API
    ├── media/          # 미디어 처리
    └── cache/          # 캐시 관리
```

### 3. 데이터베이스 확장
```sql
-- clips.db 확장
CREATE TABLE themes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL,
    description TEXT,
    color TEXT,
    icon TEXT,
    sort_order INTEGER DEFAULT 0,
    is_featured BOOLEAN DEFAULT FALSE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE collections (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    theme_id INTEGER,
    thumbnail_path TEXT,
    is_published BOOLEAN DEFAULT FALSE,
    view_count INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (theme_id) REFERENCES themes(id)
);

CREATE TABLE clip_collections (
    collection_id INTEGER,
    clip_id TEXT,
    sort_order INTEGER DEFAULT 0,
    PRIMARY KEY (collection_id, clip_id),
    FOREIGN KEY (collection_id) REFERENCES collections(id) ON DELETE CASCADE,
    FOREIGN KEY (clip_id) REFERENCES clips(id) ON DELETE CASCADE
);

-- users.db (v3 사용자용)
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    profile_image TEXT,
    level TEXT DEFAULT 'beginner',
    points INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    last_login DATETIME
);

CREATE TABLE user_progress (
    user_id INTEGER,
    clip_id TEXT,
    progress_percent INTEGER DEFAULT 0,
    completed_at DATETIME,
    attempts INTEGER DEFAULT 0,
    PRIMARY KEY (user_id, clip_id),
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE bookmarks (
    user_id INTEGER,
    clip_id TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, clip_id),
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

## 🎨 v3 User Site 구상

### 1. 사용자 인터페이스
```typescript
// theme-clips-v3/ (새로운 프로젝트)
├── src/app/
│   ├── (auth)/
│   │   ├── login/
│   │   └── register/
│   ├── discover/           # 클립 탐색
│   │   ├── themes/         # 테마별 탐색
│   │   ├── collections/    # 컬렉션 탐색
│   │   └── search/         # 검색
│   ├── learn/              # 학습 도구
│   │   ├── dictation/      # 딕테이션
│   │   ├── practice/       # 문장 연습
│   │   └── quiz/           # 퀴즈
│   ├── profile/            # 개인 프로필
│   │   ├── bookmarks/      # 북마크
│   │   ├── progress/       # 학습 진도
│   │   └── achievements/   # 성취도
│   └── community/          # 커뮤니티
│       ├── discussions/    # 토론
│       └── reviews/        # 클립 리뷰
```

### 2. 핵심 기능
- **테마 기반 탐색**: Friends, The Office, 비즈니스 영어 등
- **학습 경로**: 초급 → 중급 → 고급 체계적 진행
- **인터랙티브**: 클릭으로 문장 반복, 속도 조절
- **소셜**: 좋아요, 댓글, 공유, 랭킹
- **게임화**: 포인트, 뱃지, 레벨업

## 📊 단계별 구현 계획

### Phase 1: v2 Admin 기능 완성 (2주)
1. **클립 관리 DB 구축** (clips.db)
2. **Admin Dashboard 기본 UI**
3. **배치 클립 생성 최적화**
4. **카테고리/태그 시스템**

### Phase 2: API Gateway 구축 (2주)
1. **공개 API 엔드포인트** (v3용)
2. **인증 시스템** (JWT)
3. **API 문서화** (Swagger)
4. **캐싱 레이어** (Redis 선택사항)

### Phase 3: v3 프로젝트 시작 (4주)
1. **Next.js 13+ 프로젝트 초기화**
2. **사용자 인증 시스템**
3. **기본 클립 탐색 UI**
4. **학습 도구 MVP**

### Phase 4: 고급 기능 (6주)
1. **커뮤니티 기능**
2. **추천 시스템**
3. **모바일 최적화**
4. **PWA 구현**

## 🔧 기술 스택

### v2 Admin (현재 기반 확장)
- **Framework**: Next.js 15
- **Database**: SQLite (clips.db, users.db)
- **UI**: React + Tailwind CSS
- **Auth**: NextAuth.js (관리자용)

### v3 User Site (신규)
- **Framework**: Next.js 15 (App Router)
- **Database**: 동일 SQLite (API로 접근)
- **UI**: React + Tailwind CSS + Framer Motion
- **Auth**: NextAuth.js (소셜 로그인)
- **State**: Zustand 또는 Context API
- **PWA**: next-pwa

## 🚀 배포 전략

### Development
```
localhost:3001 - v2 Admin (현재)
localhost:3000 - v3 User Site (신규)
```

### Production
```
admin.themesearch.com - v2 Admin
themeclips.com - v3 User Site
```

## 💡 핵심 가치 제안

### v2 Admin의 가치
- **효율적인 컨텐츠 제작**: 배치 클립 생성으로 대량 컨텐츠 생산
- **체계적인 관리**: 카테고리/태그 시스템으로 조직화
- **데이터 인사이트**: 사용자 행동 분석 및 컨텐츠 최적화

### v3 User Site의 가치
- **몰입형 학습**: 테마 기반 자연스러운 영어 학습
- **개인화**: 개인 진도에 맞춘 맞춤형 경험
- **커뮤니티**: 함께 배우는 재미와 동기부여

## 🎯 기대 효과

1. **확장성**: v2 API 기반으로 v3뿐만 아니라 모바일 앱, 다른 서비스도 구축 가능
2. **유지보수성**: 관리자 기능과 사용자 기능 완전 분리
3. **비즈니스 모델**: v3에서 프리미엄 기능, 광고 등 수익화 가능
4. **사용자 경험**: 각각의 목적에 최적화된 인터페이스 제공

이 구조로 가면 **v2는 견고한 백엔드 + 관리 시스템**이 되고, **v3는 매력적인 사용자 경험**을 제공하는 완벽한 분리가 가능합니다! 🚀
